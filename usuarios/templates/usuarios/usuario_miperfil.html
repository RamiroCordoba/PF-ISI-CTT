{% extends 'dashboard/principal.html' %}
{% block Contenido %}
{% load static %}
<style>
  .perfil-bg-izq {
    background: #ff8800;
    border-top-right-radius: 200px;
    border-bottom-right-radius: 200px;
    min-height: 450px;
    position: relative;
  }
  .perfil-img-circulo {
    width: 180px;
    height: 180px;
    background: #888;
    border-radius: 50%;
    border: 6px solid #fff;
    box-shadow: 0 2px 12px rgba(0,0,0,0.10);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #eee;
    font-size: 1.1rem;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  }
  .perfil-form-label {
    font-weight: 600;
    color: #888;
    margin-bottom: 0.2rem;
  }
  .perfil-form-input {
    width: 100%;
    border: 2px solid #aaa;
    border-radius: 4px;
    padding: 6px 10px;
    background: #f8f8f8;
    color: #444;
    font-size: 1rem;
    margin-bottom: 1rem;
  }
  .perfil-form-input[disabled] {
    background: #f3f3f3;
    color: #888;
    font-weight: 500;
  }

  .perfil-btns-top {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1.2rem;
    justify-content: flex-end;
  }

  /* Botones estilo Bootstrap outline */
  .perfil-btn-volver {
    @apply btn btn-outline-secondary;
  }
  .perfil-btn-editar {
    @apply btn btn-outline-success;
  }
  .perfil-btn-cambiar {
    @apply btn btn-outline-warning;
    color: #ff8800 !important;
    border-color: #ff8800 !important;
    background: #fff !important;
  }
  .perfil-btn-cambiar:hover {
    background: #ec8d10ff !important;
    color: #fff !important;
    border-color: #ff8800 !important;
  }
</style>

<div class="container-fluid px-4">
  <h1 class="mt-4">Mi Perfil</h1>
  <hr style="height: 5px; background-color: black; border: none" />
  <div class="row align-items-stretch">
    <!-- Lado izquierdo: foto de perfil -->
    <div class="col-md-5 col-lg-4 perfil-bg-izq position-relative d-flex align-items-center justify-content-center">
      <div class="perfil-img-circulo p-0 overflow-hidden" style="background: none;">
        <!-- Imagen de perfil segun el rol -->
        {% if user.is_superuser %}
          <img src="{% static 'principal/assets/img/superadmin.png' %}" alt="Superadmin" style="width:100%;height:100%;object-fit:cover;" />
        {% elif user.is_staff %}
          <img src="{% static 'principal/assets/img/administrador.png' %}" alt="Administrador" style="width:100%;height:100%;object-fit:cover;" />
        {% else %}
          <img src="{% static 'principal/assets/img/vendedor.png' %}" alt="Vendedor" style="width:100%;height:100%;object-fit:cover;" />
        {% endif %}
      </div>
    </div>
    <!-- Lado Derecho: Datos y botones -->
    <div class="col-md-7 col-lg-8 bg-white py-4 px-4">
      <div class="perfil-btns-top">
        <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary perfil-btn-volver">
          <i class="fa fa-arrow-left me-1"></i> Volver
        </a>
        <a href="{% url 'usuarios:editar_usuario' user.pk %}" class="btn btn-outline-success perfil-btn-editar">
          <i class="fa fa-edit me-1"></i> Editar
        </a>
        <a href="#" class="btn btn-outline-warning perfil-btn-cambiar" style="color: #ff8800; border-color: #ff8800; background: #fff;">
          <i class="fa fa-key me-1"></i> Cambiar contrase√±a
        </a>
      </div>
      <form autocomplete="off">
        <label class="perfil-form-label">Nombre</label>
        <input type="text" class="perfil-form-input" value="{{ user.first_name }}" disabled>
        <label class="perfil-form-label">Apellido</label>
        <input type="text" class="perfil-form-input" value="{{ user.last_name }}" disabled>
        <label class="perfil-form-label">Usuario</label>
        <input type="text" class="perfil-form-input" value="{{ user.username }}" disabled>
        <label class="perfil-form-label">Email</label>
        <input type="email" class="perfil-form-input" value="{{ user.email }}" disabled>
        <label class="perfil-form-label">Rol/es</label>
        <input type="text" class="perfil-form-input" value="{% if user.is_staff %}Administrador{% else %}Vendedor{% endif %}" disabled>
        <div class="text-center my-3">
          {% if user.is_active %}
            <span class="badge bg-success px-3 py-2" style="font-size:1rem; font-weight:600; letter-spacing:1px;">
              <i class="fa fa-check-circle me-1"></i> Activo
            </span>
          {% else %}
            <span class="badge bg-danger px-3 py-2" style="font-size:1rem; font-weight:600; letter-spacing:1px;">
              <i class="fa fa-times-circle me-1"></i> Inactivo
            </span>
          {% endif %}
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock Contenido %}